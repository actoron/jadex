<?xml version="1.0" ?><bpmn:definitions targetNamespace="http://www.activecomponents.org/bpmn/" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:jadex="http://www.activecomponents.org/bpmnextensions" xmlns:jadexvisual="http://www.activecomponents.org/bpmnvisualextensions" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <bpmn:extension>
    <jadex:modelname>Delivery</jadex:modelname>
    <jadex:description>&lt;h1&gt;Simple Delivery Process&lt;/h1&gt; This process sends payment reminders to the JCC. Try sending the process an 'inform(payment)'.</jadex:description>
    <jadex:package>jadex.bpmn.examples.execute</jadex:package>
    <jadex:componentflags keepalive="false" monitoring="OFF" persistable="false" suspend="false" synchronous="false"/>
    <jadex:contextvariables>
      <jadex:contextvariable name="dunnings" type="int">
        <jadex:value>0</jadex:value>
      </jadex:contextvariable>
    </jadex:contextvariables>
  </bpmn:extension>
  <bpmn:process id="_P3gE1XLtEd-fEqakq96uUw" name="Pool">
    <bpmn:startEvent id="_9RNiUXLwEd-fEqakq96uUw">
      <bpmn:outgoing>T1MMz8mlZfQJn7w/</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:intermediateCatchEvent id="_1t1X0HLtEd-fEqakq96uUw" name="Item returned">
      <bpmn:incoming>4q+RcyMKFkDpAG1d</bpmn:incoming>
      <bpmn:outgoing>vuYa2rONQ8lIWit1</bpmn:outgoing>
      <bpmn:messageEventDefinition/>
      <bpmn:extensionElements>
        <jadex:property name="performative">&quot;inform&quot;</jadex:property>
        <jadex:property name="content">&quot;item&quot;</jadex:property>
      </bpmn:extensionElements>
    </bpmn:intermediateCatchEvent>
    <bpmn:task id="_P3gr4XLtEd-fEqakq96uUw" name="Ship  Items">
      <bpmn:incoming>T1MMz8mlZfQJn7w/</bpmn:incoming>
      <bpmn:incoming>VnrnERY8wbtq4UQL</bpmn:incoming>
      <bpmn:outgoing>tGNXwRkmcZUwTOHt</bpmn:outgoing>
    </bpmn:task>
    <bpmn:intermediateCatchEvent id="_xrVywXLtEd-fEqakq96uUw" name="Payment arrived">
      <bpmn:incoming>18a4b/0lnaAjXVAh</bpmn:incoming>
      <bpmn:outgoing>Sz62Fsl8jQ0vOcF7</bpmn:outgoing>
      <bpmn:messageEventDefinition/>
      <bpmn:extensionElements>
        <jadex:property name="performative">&quot;inform&quot;</jadex:property>
      </bpmn:extensionElements>
    </bpmn:intermediateCatchEvent>
    <bpmn:intermediateCatchEvent id="_wLDrwXLtEd-fEqakq96uUw" name="multi">
      <bpmn:incoming>XiLtq9AqSLQmMGfr</bpmn:incoming>
      <bpmn:incoming>e/KJRC2bddG6BwCK</bpmn:incoming>
      <bpmn:outgoing>18a4b/0lnaAjXVAh</bpmn:outgoing>
      <bpmn:outgoing>4q+RcyMKFkDpAG1d</bpmn:outgoing>
      <bpmn:outgoing>Lq6GY475gS/uIF0I</bpmn:outgoing>
      <bpmn:multipleEventDefinition/>
    </bpmn:intermediateCatchEvent>
    <bpmn:task id="_QIeDkXLuEd-fEqakq96uUw" name="Enter Payment">
      <bpmn:incoming>Sz62Fsl8jQ0vOcF7</bpmn:incoming>
      <bpmn:outgoing>ZPmEzoWynwKwxH9M</bpmn:outgoing>
    </bpmn:task>
    <bpmn:subProcess id="_6m8wUdVFEeC_1bBivy-cGg">
      <bpmn:incoming>t3uQo+cy+Ztve6oT</bpmn:incoming>
      <bpmn:outgoing>e/KJRC2bddG6BwCK</bpmn:outgoing>
      <bpmn:intermediateThrowEvent id="_WdGX0dVGEeC_1bBivy-cGg" name="Send Dunning">
        <bpmn:messageEventDefinition/>
        <bpmn:extensionElements>
	        <jadex:property name="message">new jadex.bridge.fipa.FipaMessage(jadex.bridge.fipa.FipaMessage.Performative.REQUEST, &quot;Payment late!&quot;, $component.getId().getRoot())</jadex:property>
        </bpmn:extensionElements>
      </bpmn:intermediateThrowEvent>
      <bpmn:extensionElements>
        <jadex:parameter direction="inout" name="dunnings" type="int">dunnings+1</jadex:parameter>
      </bpmn:extensionElements>
    </bpmn:subProcess>
    <bpmn:intermediateCatchEvent id="_9KQtIXLtEd-fEqakq96uUw" name="exceeded">
      <bpmn:incoming>Lq6GY475gS/uIF0I</bpmn:incoming>
      <bpmn:outgoing>WAhDZ8l28AJPZ4bh</bpmn:outgoing>
      <bpmn:timerEventDefinition>
        <bpmn:timeDuration>10000</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
      <bpmn:extensionElements>
        <jadex:property name="duration">10000</jadex:property>
      </bpmn:extensionElements>
    </bpmn:intermediateCatchEvent>
    <bpmn:exclusiveGateway default="o4Ub/2u8InjlX68I" id="_xZ1hIXLvEd-fEqakq96uUw" name="dunnings sent &lt; 3">
      <bpmn:incoming>WAhDZ8l28AJPZ4bh</bpmn:incoming>
      <bpmn:outgoing>t3uQo+cy+Ztve6oT</bpmn:outgoing>
      <bpmn:outgoing>o4Ub/2u8InjlX68I</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="_EEvroXLxEd-fEqakq96uUw" name="Blacklist\nCustomer">
      <bpmn:incoming>o4Ub/2u8InjlX68I</bpmn:incoming>
      <bpmn:outgoing>lxKKFqMZgl/4Xclr</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="_J4-UEXLxEd-fEqakq96uUw" name="Instruct Debt \nCollecting">
      <bpmn:incoming>lxKKFqMZgl/4Xclr</bpmn:incoming>
      <bpmn:outgoing>n1xZ4tLaFls+0idd</bpmn:outgoing>
    </bpmn:task>
    <bpmn:intermediateThrowEvent id="R7e3jRHACQQyyVuU" name="Send Invoice">
      <bpmn:incoming>tGNXwRkmcZUwTOHt</bpmn:incoming>
      <bpmn:outgoing>XiLtq9AqSLQmMGfr</bpmn:outgoing>
      <bpmn:messageEventDefinition/>
      <bpmn:extensionElements>
        <jadex:property name="message">new jadex.bridge.fipa.FipaMessage(jadex.bridge.fipa.FipaMessage.Performative.REQUEST, &quot;Please pay.&quot;, $component.getId().getRoot())</jadex:property>
      </bpmn:extensionElements>
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="_TXPssXLuEd-fEqakq96uUw">
      <bpmn:incoming>ZPmEzoWynwKwxH9M</bpmn:incoming>
      <bpmn:incoming>Xz56KIP6yebPnGQN</bpmn:incoming>
      <bpmn:incoming>n1xZ4tLaFls+0idd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway default="Xz56KIP6yebPnGQN" id="_4db8MXLuEd-fEqakq96uUw" name="solved?">
      <bpmn:incoming>hs2tjgbYekGmr420</bpmn:incoming>
      <bpmn:outgoing>Xz56KIP6yebPnGQN</bpmn:outgoing>
      <bpmn:outgoing>VnrnERY8wbtq4UQL</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:subProcess id="DQs4YaybLLq1kMcu" name="Complaint\nSubprocess">
      <bpmn:incoming>vuYa2rONQ8lIWit1</bpmn:incoming>
      <bpmn:outgoing>hs2tjgbYekGmr420</bpmn:outgoing>
      <bpmn:extensionElements>
        <jadex:parameter direction="out" name="repaired" type="java.lang.Boolean">Math.random() &lt; 0.5</jadex:parameter>
      </bpmn:extensionElements>
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="T1MMz8mlZfQJn7w/" sourceRef="_9RNiUXLwEd-fEqakq96uUw" targetRef="_P3gr4XLtEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="vuYa2rONQ8lIWit1" sourceRef="_1t1X0HLtEd-fEqakq96uUw" targetRef="DQs4YaybLLq1kMcu">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="tGNXwRkmcZUwTOHt" sourceRef="_P3gr4XLtEd-fEqakq96uUw" targetRef="R7e3jRHACQQyyVuU">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Sz62Fsl8jQ0vOcF7" sourceRef="_xrVywXLtEd-fEqakq96uUw" targetRef="_QIeDkXLuEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="18a4b/0lnaAjXVAh" sourceRef="_wLDrwXLtEd-fEqakq96uUw" targetRef="_xrVywXLtEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="4q+RcyMKFkDpAG1d" sourceRef="_wLDrwXLtEd-fEqakq96uUw" targetRef="_1t1X0HLtEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Lq6GY475gS/uIF0I" sourceRef="_wLDrwXLtEd-fEqakq96uUw" targetRef="_9KQtIXLtEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="ZPmEzoWynwKwxH9M" sourceRef="_QIeDkXLuEd-fEqakq96uUw" targetRef="_TXPssXLuEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="e/KJRC2bddG6BwCK" sourceRef="_6m8wUdVFEeC_1bBivy-cGg" targetRef="_wLDrwXLtEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="WAhDZ8l28AJPZ4bh" sourceRef="_9KQtIXLtEd-fEqakq96uUw" targetRef="_xZ1hIXLvEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="t3uQo+cy+Ztve6oT" sourceRef="_xZ1hIXLvEd-fEqakq96uUw" targetRef="_6m8wUdVFEeC_1bBivy-cGg">
      <bpmn:conditionExpression>dunnings&lt;3</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="o4Ub/2u8InjlX68I" sourceRef="_xZ1hIXLvEd-fEqakq96uUw" targetRef="_EEvroXLxEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="lxKKFqMZgl/4Xclr" sourceRef="_EEvroXLxEd-fEqakq96uUw" targetRef="_J4-UEXLxEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="n1xZ4tLaFls+0idd" sourceRef="_J4-UEXLxEd-fEqakq96uUw" targetRef="_TXPssXLuEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="XiLtq9AqSLQmMGfr" sourceRef="R7e3jRHACQQyyVuU" targetRef="_wLDrwXLtEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Xz56KIP6yebPnGQN" sourceRef="_4db8MXLuEd-fEqakq96uUw" targetRef="_TXPssXLuEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="VnrnERY8wbtq4UQL" sourceRef="_4db8MXLuEd-fEqakq96uUw" targetRef="_P3gr4XLtEd-fEqakq96uUw">
      <bpmn:conditionExpression>repaired</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="hs2tjgbYekGmr420" sourceRef="DQs4YaybLLq1kMcu" targetRef="_4db8MXLuEd-fEqakq96uUw">
    </bpmn:sequenceFlow>
    <bpmn:extensionElements>
    </bpmn:extensionElements>
  </bpmn:process>
  <bpmndi:BPMNDiagram>
    <bpmndi:BPMNPlane>
      <bpmndi:BPMNShape bpmnElement="_P3gE1XLtEd-fEqakq96uUw">
        <dc:Bounds height="710.0" width="1640.0" x="350.0" y="220.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_9RNiUXLwEd-fEqakq96uUw">
        <dc:Bounds height="40.0" width="40.0" x="50.43744657775625" y="259.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_1t1X0HLtEd-fEqakq96uUw">
        <dc:Bounds height="40.0" width="40.0" x="670.4374465777562" y="259.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_P3gr4XLtEd-fEqakq96uUw">
        <dc:Bounds height="100.0" width="160.0" x="210.43744657775625" y="229.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_xrVywXLtEd-fEqakq96uUw">
        <dc:Bounds height="40.0" width="40.0" x="620.4374465777562" y="69.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_wLDrwXLtEd-fEqakq96uUw">
        <dc:Bounds height="40.0" width="40.0" x="540.4374465777562" y="259.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_QIeDkXLuEd-fEqakq96uUw">
        <dc:Bounds height="100.0" width="160.0" x="800.4374465777562" y="9.513831379933663"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_6m8wUdVFEeC_1bBivy-cGg" isExpanded="true">
        <dc:Bounds height="140.0" width="220.0" x="690.4374465777562" y="339.51383137993366"/>
        <dc:Bounds height="100.0" width="160.0" x="690.0" y="340.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_WdGX0dVGEeC_1bBivy-cGg">
        <dc:Bounds height="40.0" width="40.0" x="90.0" y="40.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_9KQtIXLtEd-fEqakq96uUw">
        <dc:Bounds height="40.0" width="40.0" x="480.43744657775625" y="519.5138313799337"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_xZ1hIXLvEd-fEqakq96uUw">
        <dc:Bounds height="60.0" width="60.0" x="610.4374465777562" y="509.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_EEvroXLxEd-fEqakq96uUw">
        <dc:Bounds height="100.0" width="160.0" x="790.4374465777562" y="579.5138313799337"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_J4-UEXLxEd-fEqakq96uUw">
        <dc:Bounds height="100.0" width="160.0" x="1030.4374465777562" y="579.5138313799337"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="R7e3jRHACQQyyVuU">
        <dc:Bounds height="40.0" width="40.0" x="451.43744657775625" y="259.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_TXPssXLuEd-fEqakq96uUw">
        <dc:Bounds height="40.0" width="40.0" x="1450.4374465777562" y="229.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_4db8MXLuEd-fEqakq96uUw">
        <dc:Bounds height="60.0" width="60.0" x="1060.4374465777562" y="219.51383137993366"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="DQs4YaybLLq1kMcu" isExpanded="true">
        <dc:Bounds height="120.0" width="170.0" x="830.4374465777562" y="189.51383137993366"/>
        <dc:Bounds height="100.0" width="160.0" x="620.0" y="130.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="T1MMz8mlZfQJn7w/">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="tGNXwRkmcZUwTOHt">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="XiLtq9AqSLQmMGfr">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="18a4b/0lnaAjXVAh">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="4q+RcyMKFkDpAG1d">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Lq6GY475gS/uIF0I">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Sz62Fsl8jQ0vOcF7">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="ZPmEzoWynwKwxH9M">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Xz56KIP6yebPnGQN">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="VnrnERY8wbtq4UQL">
        <di:waypoint x="1089.5625534222438" y="140.48616862006634"/>
        <di:waypoint x="289.56255342224375" y="140.48616862006634"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="e/KJRC2bddG6BwCK">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="WAhDZ8l28AJPZ4bh">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="t3uQo+cy+Ztve6oT">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="o4Ub/2u8InjlX68I">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="lxKKFqMZgl/4Xclr">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="n1xZ4tLaFls+0idd">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="vuYa2rONQ8lIWit1">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="hs2tjgbYekGmr420">
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
