<?xml version="1.0" ?><bpmn:definitions targetNamespace="http://www.activecomponents.org/bpmn/" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:jadex="http://www.activecomponents.org/bpmnextensions" xmlns:jadexvisual="http://www.activecomponents.org/bpmnvisualextensions" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <bpmn:extension>
    <jadex:modelname>RemoteSubProcessIntermediateResults</jadex:modelname>
    <jadex:description>&lt;H1&gt;Intermediate Result Events&lt;/H1&gt; Tests if a subprocess can be started that produces intermediate results. These intermediate results will be received by the parent process and can be handled by an activity signal handler.</jadex:description>
    <jadex:package>jadex.bpmn.testcases</jadex:package>
    <jadex:imports>
      <jadex:import>jadex.base.test.*</jadex:import>
      <jadex:import>jadex.bridge.*</jadex:import>
      <jadex:import>java.util.*</jadex:import>
      <jadex:import>jadex.bridge.service.types.cms.*</jadex:import>
    </jadex:imports>
    <jadex:results>
      <jadex:result name="testresults" type="Testcase">
        <jadex:description>The test result</jadex:description>
      </jadex:result>
      <jadex:result name="results" type="List">
        <jadex:description>The intermediate results</jadex:description>
        <jadex:value>new ArrayList()</jadex:value>
      </jadex:result>
    </jadex:results>
    <jadex:contextvariables>
      <jadex:contextvariable name="cid" type="IComponentIdentifier"/>
    </jadex:contextvariables>
    <jadex:configurations>
      <jadex:configuration name="Pool">
      </jadex:configuration>
    </jadex:configurations>
  </bpmn:extension>
  <bpmn:process id="_dQi2YUEGEeGYyvkANn-TCw" name="Pool">
    <bpmn:startEvent id="_hdNEEUEGEeGYyvkANn-TCw">
      <bpmn:outgoing>_h7uMEUEGEeGYyvkANn-TCw</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="_dQkEgUEGEeGYyvkANn-TCw" name="Create remote \nplatform">
      <bpmn:incoming>_h7uMEUEGEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:outgoing>_f17AYUEKEeGYyvkANn-TCw</bpmn:outgoing>
      <bpmn:extensionElements>
        <jadex:class>CreatePlatformTask</jadex:class>
        <jadex:parameter direction="out" name="cid" type="jadex.bridge.IComponentIdentifier"/>
      </bpmn:extensionElements>
    </bpmn:task>
    <bpmn:exclusiveGateway default="_XDJmYUEOEeGYyvkANn-TCw" id="_USp0sUEOEeGYyvkANn-TCw">
      <bpmn:incoming>_US5FQUEOEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:outgoing>_VFaHUUEOEeGYyvkANn-TCw</bpmn:outgoing>
      <bpmn:outgoing>_XDJmYUEOEeGYyvkANn-TCw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="_XC7j8UEOEeGYyvkANn-TCw" name="Failure">
      <bpmn:incoming>_XDJmYUEOEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:outgoing>_ZGbFsUEOEeGYyvkANn-TCw</bpmn:outgoing>
      <bpmn:extensionElements>
        <jadex:class>jadex.bpmn.runtime.task.WriteContextTask</jadex:class>
        <jadex:parameter direction="in" name="name" type="java.lang.String">&quot;testresults&quot;</jadex:parameter>
        <jadex:parameter direction="in" name="value" type="java.lang.Object">new Testcase(1, new TestReport[]{new TestReport(&quot;#1&quot;,  &quot;Test intermediate results processing.&quot;, false, &quot;Wrong number of results.&quot;)})</jadex:parameter>
      </bpmn:extensionElements>
    </bpmn:task>
    <bpmn:task id="_VFMr8UEOEeGYyvkANn-TCw" name="Success">
      <bpmn:incoming>_VFaHUUEOEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:outgoing>_YvX3oUEOEeGYyvkANn-TCw</bpmn:outgoing>
      <bpmn:extensionElements>
        <jadex:class>jadex.bpmn.runtime.task.WriteContextTask</jadex:class>
        <jadex:parameter direction="in" name="name" type="java.lang.String">&quot;testresults&quot;</jadex:parameter>
        <jadex:parameter direction="in" name="value" type="java.lang.Object">new Testcase(1, new TestReport[]{new TestReport(&quot;#1&quot;,  &quot;Test intermediate results processing.&quot;, true, null)})</jadex:parameter>
      </bpmn:extensionElements>
    </bpmn:task>
    <bpmn:exclusiveGateway id="_YvJOIUEOEeGYyvkANn-TCw">
      <bpmn:incoming>_YvX3oUEOEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:incoming>_ZGbFsUEOEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:outgoing>_aJUGEUEOEeGYyvkANn-TCw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="_aJHRwUEOEeGYyvkANn-TCw">
      <bpmn:incoming>_aJUGEUEOEeGYyvkANn-TCw</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:task id="_f1tlAUEKEeGYyvkANn-TCw" name="Save platform cid">
      <bpmn:incoming>_f17AYUEKEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:outgoing>_7xR4AUEKEeGYyvkANn-TCw</bpmn:outgoing>
      <bpmn:extensionElements>
        <jadex:class>jadex.bpmn.runtime.task.WriteContextTask</jadex:class>
        <jadex:parameter direction="in" name="name" type="java.lang.String">&quot;cid&quot;</jadex:parameter>
        <jadex:parameter direction="in" name="value" type="java.lang.Object">cid</jadex:parameter>
      </bpmn:extensionElements>
    </bpmn:task>
    <bpmn:subProcess id="_7wemwUEKEeGYyvkANn-TCw" name="SubProcess">
      <bpmn:incoming>_7xR4AUEKEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:outgoing>_US5FQUEOEeGYyvkANn-TCw</bpmn:outgoing>
      <bpmn:extensionElements>
        <jadex:parameter direction="out" name="out" type="Object"/>
        <jadex:property name="creation info">new CreationInfo(cid)</jadex:property>
        <jadex:property name="file" type="java.lang.String">&quot;IntermediateResultProducer.bpmn&quot;</jadex:property>
        <jadex:subprocessexpressionref>&quot;IntermediateResultProducer.bpmn&quot;</jadex:subprocessexpressionref>
      </bpmn:extensionElements>
    </bpmn:subProcess>
    <bpmn:boundaryEvent attachedToRef="_7wemwUEKEeGYyvkANn-TCw" id="_GK3aoUEOEeGYyvkANn-TCw">
      <bpmn:outgoing>_LRk1wEEOEeGYyvkANn-TCw</bpmn:outgoing>
      <bpmn:signalEventDefinition/>
      <bpmn:extensionElements>
        <jadex:property name="signal_trigger">&quot;out&quot;</jadex:property>
      </bpmn:extensionElements>
    </bpmn:boundaryEvent>
    <bpmn:task id="_JQERAUEOEeGYyvkANn-TCw" name="result">
      <bpmn:incoming>_LRk1wEEOEeGYyvkANn-TCw</bpmn:incoming>
      <bpmn:extensionElements>
        <jadex:class>jadex.bpmn.runtime.task.WriteContextTask</jadex:class>
        <jadex:parameter direction="in" name="name" type="String">&quot;results&quot;</jadex:parameter>
        <jadex:parameter direction="in" name="value" type="Object"/>
        <jadex:parameter direction="in" name="key" type="String">results.size()</jadex:parameter>
      </bpmn:extensionElements>
    </bpmn:task>
    <bpmn:sequenceFlow id="_h7uMEUEGEeGYyvkANn-TCw" sourceRef="_hdNEEUEGEeGYyvkANn-TCw" targetRef="_dQkEgUEGEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_f17AYUEKEeGYyvkANn-TCw" sourceRef="_dQkEgUEGEeGYyvkANn-TCw" targetRef="_f1tlAUEKEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_VFaHUUEOEeGYyvkANn-TCw" sourceRef="_USp0sUEOEeGYyvkANn-TCw" targetRef="_VFMr8UEOEeGYyvkANn-TCw">
      <bpmn:conditionExpression>results.size()==6</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_XDJmYUEOEeGYyvkANn-TCw" sourceRef="_USp0sUEOEeGYyvkANn-TCw" targetRef="_XC7j8UEOEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_ZGbFsUEOEeGYyvkANn-TCw" sourceRef="_XC7j8UEOEeGYyvkANn-TCw" targetRef="_YvJOIUEOEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_YvX3oUEOEeGYyvkANn-TCw" sourceRef="_VFMr8UEOEeGYyvkANn-TCw" targetRef="_YvJOIUEOEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_aJUGEUEOEeGYyvkANn-TCw" sourceRef="_YvJOIUEOEeGYyvkANn-TCw" targetRef="_aJHRwUEOEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_7xR4AUEKEeGYyvkANn-TCw" sourceRef="_f1tlAUEKEeGYyvkANn-TCw" targetRef="_7wemwUEKEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_US5FQUEOEeGYyvkANn-TCw" sourceRef="_7wemwUEKEeGYyvkANn-TCw" targetRef="_USp0sUEOEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="_LRk1wEEOEeGYyvkANn-TCw" sourceRef="_GK3aoUEOEeGYyvkANn-TCw" targetRef="_JQERAUEOEeGYyvkANn-TCw">
    </bpmn:sequenceFlow>
    <bpmn:extensionElements>
      <jadex:dataFlow id="uT1lKiSiQoSKJU5u" sourceParam="cid" sourceRef="_dQkEgUEGEeGYyvkANn-TCw" targetParam="value" targetRef="_f1tlAUEKEeGYyvkANn-TCw"/>
      <jadex:dataFlow id="DSX1cP8H4JK0AXoq" sourceParam="out" sourceRef="_7wemwUEKEeGYyvkANn-TCw" targetParam="value" targetRef="_JQERAUEOEeGYyvkANn-TCw"/>
    </bpmn:extensionElements>
  </bpmn:process>
  <bpmndi:BPMNDiagram>
    <bpmndi:BPMNPlane>
      <bpmndi:BPMNShape bpmnElement="_dQi2YUEGEeGYyvkANn-TCw">
        <dc:Bounds height="600.0" width="3000.0" x="0.0" y="0.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_hdNEEUEGEeGYyvkANn-TCw">
        <dc:Bounds height="40.0" width="40.0" x="100.0" y="130.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_dQkEgUEGEeGYyvkANn-TCw">
        <dc:Bounds height="100.0" width="160.0" x="270.0" y="100.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_USp0sUEOEeGYyvkANn-TCw">
        <dc:Bounds height="60.0" width="60.0" x="910.0" y="120.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_XC7j8UEOEeGYyvkANn-TCw">
        <dc:Bounds height="100.0" width="160.0" x="1010.0" y="30.0"/>
        <di:extension>
          <jadexvisual:internalParameter>name</jadexvisual:internalParameter>
          <jadexvisual:internalParameter>value</jadexvisual:internalParameter>
        </di:extension>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_VFMr8UEOEeGYyvkANn-TCw">
        <dc:Bounds height="100.0" width="160.0" x="1010.0" y="180.0"/>
        <di:extension>
          <jadexvisual:internalParameter>name</jadexvisual:internalParameter>
          <jadexvisual:internalParameter>value</jadexvisual:internalParameter>
        </di:extension>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_YvJOIUEOEeGYyvkANn-TCw">
        <dc:Bounds height="60.0" width="60.0" x="1270.0" y="120.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_aJHRwUEOEeGYyvkANn-TCw">
        <dc:Bounds height="40.0" width="40.0" x="1400.0" y="130.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_f1tlAUEKEeGYyvkANn-TCw">
        <dc:Bounds height="100.0" width="160.0" x="460.0" y="100.0"/>
        <di:extension>
          <jadexvisual:internalParameter>name</jadexvisual:internalParameter>
        </di:extension>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_7wemwUEKEeGYyvkANn-TCw">
        <dc:Bounds height="100.0" width="160.0" x="670.0" y="100.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_GK3aoUEOEeGYyvkANn-TCw">
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="_JQERAUEOEeGYyvkANn-TCw">
        <dc:Bounds height="100.0" width="160.0" x="1010.0" y="310.0"/>
        <di:extension>
          <jadexvisual:internalParameter>name</jadexvisual:internalParameter>
          <jadexvisual:internalParameter>key</jadexvisual:internalParameter>
        </di:extension>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="_LRk1wEEOEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_f17AYUEKEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_h7uMEUEGEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_7xR4AUEKEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_US5FQUEOEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_VFaHUUEOEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_XDJmYUEOEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_YvX3oUEOEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_ZGbFsUEOEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="_aJUGEUEOEeGYyvkANn-TCw">
      </bpmndi:BPMNEdge>
      <di:Edge jadexElement="uT1lKiSiQoSKJU5u" type="data">
      </di:Edge>
      <di:Edge jadexElement="DSX1cP8H4JK0AXoq" type="data">
        <di:waypoint x="865.3333333333334" y="125.33333333333333"/>
        <di:waypoint x="869.3333333333334" y="334.6666666666667"/>
      </di:Edge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
